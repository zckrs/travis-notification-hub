{"name":"Notification Hub","tagline":"Pushes the build notifications to the Travis-CI Mobile apps","body":"travis-notification-hub\r\n=======================\r\n\r\nA node.js RESTful service that serves as a middle-tier hub for dispatching Travis-CI build notifications to Android and iOS applications.\r\n\r\n[![Build Status](https://travis-ci.org/floydpink/travis-notification-hub.png?branch=master)](https://travis-ci.org/floydpink/travis-notification-hub)\r\n\r\n### Travis Notification Hub API\r\n\r\n##### Devices\r\n\r\nA device that has the mobile client with a uniquely identifiable `deviceId`\r\n\r\n`PUT /devices/:deviceId`\r\n - Create or update the device with `deviceId` along with APNS or GCM unique identifier\r\n \r\nThe request payload for device (where either `iOS` or `android` has to be populated to match `platform` value:\r\n\r\n```\r\n{\r\n  \"deviceId\" : \"Unique identifier\",\r\n  \"name\"     : \"Friendly name\",\r\n  \"platform\" : \"iOS | Android\",\r\n  \"iOS\"      : {\r\n    \"pushBadge\"   : \"0 | 1\",\r\n    \"pushSound\"   : \"0 | 1\",\r\n    \"pushAlert\"   : \"0 | 1\",\r\n    \"enabled\"     : \"0 | 1\",\r\n    \"deviceToken\" : \"APNS device token\"\r\n  },\r\n  \"android\"  : {\r\n    \"registrationId\" : \"GCM registration id\"\r\n  }\r\n}\r\n```\r\n\r\n#### Repositories\r\n \r\nA collection of GitHub repositories with Travis-CI builds that a device could subscribe to for notifications\r\n \r\n`PUT /devices/:deviceId/repos/:repoId`\r\n - Subscribe the device with `deviceId` for push notifications from the repository with id `repoId`\r\n\r\n`DELETE /devices/:deviceId/repos/:repoId`\r\n - Unsubscribe the device with `deviceId` for push notifications from the repository with id `repoId`\r\n\r\nThe request payload for both the above endpoints with device and repo details:\r\n\r\n```\r\n{\r\n  \"deviceId\" : \"Unique identifier\",\r\n  \"repo\"     : {\r\n    \"repoId\" : \"Travis-CI identifier for the repo (egs. 543678)\",\r\n    \"name\"   : \"Name of the repo (egs. floydpink/travis-notification-hub)\"\r\n  }\r\n}\r\n```\r\n \r\n`DELETE /devices/:deviceId/repos`\r\n - Unsubscribe all previously subscribed repositories\r\n\r\nThe request payload for this request just has the `deviceId`:\r\n\r\n```\r\n{\r\n  \"deviceId\" : \"Unique identifier\"\r\n}\r\n```\r\n\r\nFor all the four endpoints above, the `deviceId` (and `repoId`, if applicable) in the payload should match the ones in the URL.\r\n\r\n#### Notifications\r\n\r\nA notification from Travis-CI for every completed build along with their build status and repository id.\r\n\r\n`POST /notifications`\r\n - Dispatch push notifications to all devices that have subscribed to the repository in the incoming notification\r\n\r\nThe request payload will have build status and the repo identifier and name:\r\n\r\n```\r\n{\r\n  \"buildFailed\" : false | true,\r\n  \"repoId\"      : \"Travis-CI identifier for the repo (egs. 543678)\",\r\n  \"name\"        : \"Name of the repo (egs. floydpink/travis-notification-hub)\"\r\n}\r\n```\r\n\r\n### Tests\r\n\r\nRun the tests using `npm test`\r\n","google":"UA-36383654-4","note":"Don't delete this file! It's used internally to help with page regeneration."}